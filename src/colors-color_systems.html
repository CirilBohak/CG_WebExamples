<html>
<head>
	<title>Computer Graphics - Web Examples</title>
		<link rel="stylesheet" type="text/css" href="./css/design.css" />
		<link rel="stylesheet" type="text/css" href="./css/flick/jquery-ui-1.10.3.custom.min.css">
		<link rel="stylesheet" type="text/css" href="./css/colorpicker/colorpicker.css" />
		
		<script src="./scripts/core/jquery.min.js"></script>
		<script src="./scripts/core/jquery-migrate-1.2.1.min.js"></script>
		<script src="./scripts/core/jquery.tools.min.js"></script>
		<script src="./scripts/core/jquery-ui-1.10.3.custom.min.js"></script>
		
		<script type="text/javascript" src="./scripts/core/colorpicker/colorpicker_1.4.js"></script>
    	<script type="text/javascript" src="./scripts/core/colorpicker/eye.js"></script>
    	<script type="text/javascript" src="./scripts/core/colorpicker/utils.js"></script>
    	<script type="text/javascript" src="./scripts/core/colorpicker/layout.js?ver=1.0.2"></script>
	
		<script src="./scripts/algebra/math.js"></script>
		
		<script src="./scripts/colors-color_systems.js"></script>
		<script src="./scripts/html_gui/ui_colors-color_systems.js"></script>
</head>
	
<script type="text/x-mathjax-config">
	MathJax.Hub.Queue(function () {
	  exampleInit();
	});
	
	MathJax.Hub.Config({
		showProcessingMessages: false,
		tex2jax: { inlineMath: [['$','$'],['\\(','\\)']]},
		styles: { ".MathJax_SVG svg > g, .MathJax_SVG_Display svg > g": {
			fill: "#336699",
			stroke: "#336699"
			}}		
	});
	
	MathJax.Hub.Queue(["Typeset",MathJax.Hub,"result"]);
</script>

<body>
	<h1>Computer Graphics - Web Examples</h1>
	<h2>Color systems: conversion between RGB to HSL and RGB to HSV</h2>
	<strong> <a href="./index.html">&lt;- back </a></strong>
	<div id="content">
		<div id="contentLeft" class="border ui-corner-all">
			<div class="ui-widget">
				<div class="ui-state-highlight ui-corner-all">
					<p><span class="ui-icon ui-icon-info" style="float: left; margin-right: .3em;"></span>
					<strong>Info:</strong> You can pick a color with color picker. This color will be shown on the right in all color systems(RGB, HSV and HSL).</p>
				</div>
			</div>
			<div class="ui-widget">
				<div class="ui-state-error ui-corner-all">
					<p><span class="ui-icon ui-icon-alert" style="float: left; margin-right: .3em;"></span>
					<strong>Alert:</strong> Work in progress ...</p>
				</div>
			</div>
			
			<div class="inner_content border ui-corner-all">
				<p id="colorpickerHolder" style="margin:0px;"></p>
				Formulas used to calculate RGB to HSL and RGB to HSV:<br /><br />
				<div id="result">
					<div id="tabs_config">
						<ul>
							<li><a href="#tabs-1">RGB</a></li>
							<li><a href="#tabs-2">RGB to HSL</a></li>
							<li><a href="#tabs-3">RGB to HSV</a></li>
						</ul>
						<div id="tabs-1" style="overflow:hidden; color: #336699;">
							<span class="scale">${}$</span><br /><br />
							<span class="scale">${}$</span>
						</div>
						<div id="tabs-2" style="overflow:hidden; color: #336699;">
							<b>Hue calculation:</b><br />
							<span class="scale">${}$</span><br /><br /><br />
							<b>Saturation calculation:</b><br />
							<span class="scale">${}$</span><br /><br /><br />
							<b>Lightness calculation:</b><br />
							<span class="scale">${}$</span><br />
						</div>
						<div id="tabs-3" style="overflow:hidden; color: #336699;">
							<b>Hue calculation:</b><br />
							<span class="scale">${}$</span><br /><br /><br />
							<b>Saturation calculation:</b><br />
							<span class="scale">${}$</span><br /><br /><br />
							<b>Value calculation:</b><br />
							<span class="scale">${}$</span>
						</div>
					</div>
					
					
				</div>
			</div>
		</div>
		<div id="contentRight">
			<canvas id="surface" width="800px" height="600px"></canvas>
		</div>
	</div>
	
	<script type="text/javascript">
		var can = document.getElementById("surface");
		var ctx = can.getContext("2d"),
			radius = 300,
			thickness = 200,
			p = {
				x: 400, //can.width
				y: 400
			},
			start = Math.PI,
			end = start + Math.PI / 2,
			step = Math.PI / 360,
			ang = 0,
			grad,
			r = 0, g = 0, b = 0,
			pct = 0;
		
		ctx.translate(p.x, p.y);
		
		function drawDots(rgb) {
			var r = rgb["r"],
				g = rgb["g"],
				b = rgb["b"];
		
			var hsl = rgbToHsl(r,g,b);
			var h1 = (Math.round(hsl[0])),
				s1 = (Math.round(hsl[1])),
				l1 = (Math.round(hsl[2]));
			
			var hsv = rgbToHsv(r,g,b);
			var h2 = (Math.round(hsv[0])),
				s2 = (Math.round(hsv[1])),
				v2 = (Math.round(hsv[2]));
			
			ctx.clearRect ( -300 , -300 , 600 , 600 );	
			ctx.fillStyle = "black";
			ctx.font = "bold 16px Arial";
			ctx.fillText("RGB COLOR SYSTEM", -200, -330);
			
			for (ang = start; ang <= end; ang += step) {
				ctx.save();
				ctx.rotate(-ang);
				grad = ctx.createLinearGradient(0, radius - thickness, 0, radius);
				grad.addColorStop(0, 'black');
				
				h = 360 - (ang - start)/(end - start) * 360;
				s = '100%';
				l = '50%';
				
				var hsl = 'hsl(' + [h,s,l].join() + ')';
				
				if(Math.round(h)==h1 || Math.round(h)==h1+1 || Math.round(h)==h1-1) {
					var rt = radius - thickness;
					
					ctx.strokeStyle = "#000000";	
					ctx.beginPath();
					ctx.moveTo(0, 0);
					ctx.lineTo(0, rt);
					ctx.stroke();		
				}
				
				grad.addColorStop(.5, hsl);
				grad.addColorStop(1, 'white');
				
				ctx.fillStyle = grad;
				ctx.fillRect(0, radius - thickness, radius/10, thickness);
				ctx.restore();
			}
			
			ctx.fillStyle = "black";
			ctx.font = "bold 16px Arial";
			ctx.fillText("RGB=("+ r +", "+ g +", "+ b +")", 10, 10);		
			ctx.fillText("HSL=("+ h1 +" degrees, "+ s1 +"%, "+ l1 +"%)", 10, 30);
			ctx.fillText("HSV=("+h2+" degrees, "+s2+"%, "+v2+"%)", 10, 50);		
		}
	</script>

	<script type="text/javascript" src="./scripts/core/mathjax/MathJax.js?config=TeX-AMS-MML_SVG-full"></script>
</body>
</html>
